(function(f,e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e(require("rome"),require("moment")):"function"===typeof define&&define.amd?define(["rome","moment"],e):f.MaterialDatetimePicker=e(f.rome,f.moment)})(this,function(f,e){function k(d,a){var b=document.createElement("div");b.innerHTML=a.trim();d.appendChild(b.firstChild);return this}f="default"in f?f["default"]:f;e="default"in e?e["default"]:e;var l=function(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function");
},m=function(){function d(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,b,c){b&&d(a.prototype,b);c&&d(a,c);return a}}(),p=function(d,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?
Object.setPrototypeOf(d,a):d.__proto__=a)},q=function(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?d:a},r=function(d){if(Array.isArray(d)){for(var a=0,b=Array(d.length);a<d.length;a++)b[a]=d[a];return b}return Array.from(d)},n=function(){return{"default":e().startOf("hour"),styles:{scrim:"c-scrim",back:"c-datepicker__back",container:"c-datepicker__calendar",date:"c-datepicker__date",dayBody:"c-datepicker__days-body",
dayBodyElem:"c-datepicker__day-body",dayConcealed:"c-datepicker__day--concealed",dayDisabled:"c-datepicker__day--disabled",dayHead:"c-datepicker__days-head",dayHeadElem:"c-datepicker__day-head",dayRow:"c-datepicker__days-row",dayTable:"c-datepicker__days",month:"c-datepicker__month",next:"c-datepicker__next",positioned:"c-datepicker--fixed",selectedDay:"c-datepicker__day--selected",selectedTime:"c-datepicker__time--selected",time:"c-datepicker__time",timeList:"c-datepicker__time-list",timeOption:"c-datepicker__time-option",
clockNum:"c-datepicker__clock__num"},format:"DD/MM/YY",container:document.body,dateValidator:void 0}};return function(d){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};l(this,a);var c=q(this,(a.__proto__||Object.getPrototypeOf(a)).call(this)),g=Object.assign(n().styles,b.styles);c.options=Object.assign(n(),b);c.options.styles=g;c.on("*",function(b,a){if(c.options.el){var g=new CustomEvent(b,c,a);c.options.el.dispatchEvent(g)}});return c}p(a,d);m(a,[{key:"initializeRome",
value:function(b,a){var c=this;return f(b,{styles:this.options.styles,time:!1,dateValidator:a,initialValue:this.value}).on("data",function(b){return c.set(b)})}},{key:"open",value:function(){k(document.body,'\n<div class="'+this.options.styles.scrim+'"></div>\n');k(this.options.container,'\n<div class="c-datepicker">\n  <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker--show-time" type="radio" name="date-toggle" value="time" >\n\n  <input class="c-datepicker__toggle c-datepicker__toggle--left  c-datepicker--show-calendar" type="radio" name="date-toggle" value="calendar" checked>\n\n  <div class="c-datepicker__header">\n    <div class="c-datepicker__header-day">\n      <span class="js-day">Monday</span>\n    </div>\n    <div class="c-datepicker__header-date">\n      <span class="c-datepicker__header-date__month js-date-month"></span>\n      <span class="c-datepicker__header-date__day js-date-day"></span>\n      <span class="c-datepicker__header-date__time js-date-time">\n        <span class="c-datepicker__header-date__hours js-date-hours">09</span>:<span class="c-datepicker__header-date__minutes js-date-minutes">00</span>\n      </span>\n    </div>\n  </div>\n\n  <div class="c-datepicker__calendar"></div>\n  <div class="c-datepicker__clock">\n    <div class="c-datepicker__clock__am-pm-toggle">\n      <label class="c-datepicker__toggle--checked">\n        <input checked="checked" class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--am" type="radio" name="time-date-toggle" value="AM" />\n        AM\n      </label>\n\n      <label>\n        <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--pm" type="radio" name="time-date-toggle" value="PM" />\n        PM\n      </label>\n    </div>\n\n    <div class="c-datepicker__clock__hours">\n      <div class="c-datepicker__clock__num" data-number="3">3</div>\n      <div class="c-datepicker__clock__num" data-number="4">4</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="6">6</div>\n      <div class="c-datepicker__clock__num" data-number="7">7</div>\n      <div class="c-datepicker__clock__num" data-number="8">8</div>\n      <div class="c-datepicker__clock__num" data-number="9">9</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock__num" data-number="11">11</div>\n      <div class="c-datepicker__clock__num" data-number="0">12</div>\n      <div class="c-datepicker__clock__num" data-number="1">1</div>\n      <div class="c-datepicker__clock__num" data-number="2">2</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n    <div class="c-datepicker__clock__minutes">\n      <div class="c-datepicker__clock__num" data-number="15">15</div>\n      <div class="c-datepicker__clock__num" data-number="20">20</div>\n      <div class="c-datepicker__clock__num" data-number="25">25</div>\n      <div class="c-datepicker__clock__num" data-number="30">30</div>\n      <div class="c-datepicker__clock__num" data-number="35">35</div>\n      <div class="c-datepicker__clock__num" data-number="40">40</div>\n      <div class="c-datepicker__clock__num" data-number="45">45</div>\n      <div class="c-datepicker__clock__num" data-number="50">50</div>\n      <div class="c-datepicker__clock__num" data-number="55">55</div>\n      <div class="c-datepicker__clock__num" data-number="0">0</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-btns">\n    <a class="c-btn c-btn--flat js-cancel">Cancel</a>\n    <a class="c-btn c-btn--flat js-ok">OK</a>\n  </div>\n</div>\n');
this.pickerEl=this.options.container.querySelector(".c-datepicker");this.scrimEl=document.body.querySelector("."+this.options.styles.scrim);this.amToggleEl=this.$(".c-datepicker__clock--am");this.pmToggleEl=this.$(".c-datepicker__clock--pm");this.value||(this.value=e(this.options["default"]));this.setDate(this.value);this.initializeRome(this.$("."+this.options.styles.container),this.options.dateValidator);this._show()}},{key:"close",value:function(){this._hide()}},{key:"_hide",value:function(){var b=
this;this.pickerEl.classList.remove("open");window.setTimeout(function(){b.options.container.removeChild(b.pickerEl);document.body.removeChild(b.scrimEl);b.trigger("close")},200);return this}},{key:"_show",value:function(){var b=this;this.delegateEvents();window.requestAnimationFrame(function(){b.scrimEl.classList.add(b.options.styles.scrim+"--shown");b.pickerEl.classList.add("c-datepicker--open");b.trigger("open")});return this}},{key:"delegateEvents",value:function(){var b=this;this.$(".js-cancel").addEventListener("click",
function(){return b.clickCancel()},!1);this.$(".js-ok").addEventListener("click",function(){return b.clickSubmit()},!1);this.$("."+this.options.styles.clockNum).forEach(function(a){a.addEventListener("click",function(a){return b.clickClock(a)},!1)});this.$(".c-datepicker__clock--am").addEventListener("click",function(a){return b.clickAm(a)},!1);this.$(".c-datepicker__clock--pm").addEventListener("click",function(a){return b.clickPm(a)},!1);return this}},{key:"clickSubmit",value:function(){this.close();
this.trigger("submit",this.value,this);return this}},{key:"clickCancel",value:function(){this.close();this.trigger("cancel",this.value,this);return this}},{key:"clickClock",value:function(b){b=parseInt(b.currentTarget.getAttribute("data-number"),10);0===b&&"pm"===this.meridiem?b=12:"pm"===this.meridiem&&(b+=12);this.value.hour(b);this.setTime(this.value);return this}},{key:"clickAm",value:function(){"pm"===this.meridiem&&(this.meridiem="am",this.value.hour(this.value.hour()-12));this.setTime(this.value);
return this}},{key:"clickPm",value:function(){"am"===this.meridiem&&(this.meridiem="pm",this.value.hour(this.value.hour()+12));this.setTime(this.value);return this}},{key:"data",value:function(b){return b?this.set(b):this.value}},{key:"set",value:function(b,a){var c=e(b),d=[];c.date()!==this.value.date()||c.month()!==this.value.month()||c.year()!==this.value.year()?(this.setDate(c),d.push("change:date")):(this.setTime(c),d.push("change:time"));this.options.el&&("INPUT"===this.options.el.tagName?this.options.el.value=
c.format(this.options.format):this.options.el.setAttribute("data-value",c.format(this.options.format)));a&&a.silent||this.trigger(["change"].concat(d).join(" "),this.value,this)}},{key:"setDate",value:function(b){b=e(b);var a=b.format("MMM"),d=b.format("Do"),f=b.format("dddd"),h=b.format("YYYY");this.$(".js-day").innerText=f;this.$(".js-date-month").innerText=a+" "+h;this.$(".js-date-day").innerText=d;this.value.year(b.year());this.value.month(b.month());this.value.date(b.date());return this}},{key:"setTime",
value:function(b){b=e(b);var a=b.format("HH"),d=parseInt(a,10)%12;this.$(".js-date-hours").innerText=a;this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+'[data-number="'+d+'"]').classList.add("."+this.options.styles.clockNum+"--active");this.value.hours(b.hours());this.meridiem=this.value.format("a");"pm"===this.meridiem?(this.amToggleEl.removeAttribute("checked"),this.pmToggleEl.setAttribute("checked","checked"),this.amToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),
this.pmToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")):(this.pmToggleEl.removeAttribute("checked"),this.amToggleEl.setAttribute("checked","checked"),this.pmToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.amToggleEl.parentElement.classList.add("c-datepicker__toggle--checked"));return this}},{key:"$",value:function(b){b=this.pickerEl.querySelectorAll(b);return 1<b.length?[].concat(r(b)):b[0]}}]);return a}(function(){function d(){l(this,d);this._events=
{"*":[]}}m(d,[{key:"trigger",value:function(a,b){var c=this;a.split(" ").forEach(function(a){c._events["*"].forEach(function(c){return c.fn.call(c.scope,a,b)});c._events[a]&&c._events[a].forEach(function(a){a.fn.call(a.scope,b)})});return this}},{key:"on",value:function(a,b,c){this._events[a]||(this._events[a]=[]);this._events[a].push({eventName:a,fn:b,scope:c||this});return this}},{key:"off",value:function(a,b){if(!this._events[a])return this;b||(this._events[a]=[]);this._events[a]=this._events[a].filter(function(a){return a.fn!==
b});return this}},{key:"once",value:function(a,b,c){var d=this;return this.on(a,function h(){b.call(c,a,b,c);d.off(a,h)},c)}}]);return d}())});